# Generated by Django 4.2.4 on 2023-08-13 14:51

import datetime
from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Color',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('title',
                 models.CharField(max_length=60, verbose_name='Название')),
            ],
            options={
                'verbose_name': 'Цвет',
                'verbose_name_plural': 'Цвета',
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('organisation',
                 models.CharField(max_length=100, verbose_name='ИП / ООО')),
                ('name',
                 models.CharField(max_length=100,
                                  verbose_name='ФИО покупателя')),
                ('address',
                 models.CharField(max_length=100,
                                  verbose_name='Адрес доставки')),
                ('phone',
                 models.CharField(max_length=15, verbose_name='Телефон')),
            ],
            options={
                'verbose_name': 'Покупатель',
                'verbose_name_plural': 'Покупатели',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Material',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('title',
                 models.CharField(max_length=60, verbose_name='Название')),
            ],
            options={
                'verbose_name': 'Материал',
                'verbose_name_plural': 'Материалы',
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('number',
                 models.CharField(max_length=100, verbose_name='Номер')),
                ('created_at',
                 models.DateTimeField(default=datetime.datetime.utcnow,
                                      verbose_name='Создан')),
                ('due_date',
                 models.DateTimeField(default=datetime.datetime.utcnow,
                                      verbose_name='Плановая отгрузка')),
                ('priority',
                 models.CharField(choices=[('low', 'Низкий'),
                                           ('normal', 'Обычный'),
                                           ('high', 'Высокий')],
                                  default='normal',
                                  max_length=20,
                                  verbose_name='Приоритет')),
                ('status',
                 models.CharField(choices=[('new', 'Новый'),
                                           ('wait_payment', 'Ожидает оплаты'),
                                           ('payed', 'Оплачен'),
                                           ('assembly', 'Сборка'),
                                           ('assembled', 'Собран'),
                                           ('coloring', 'Покраска'),
                                           ('packing', 'Упаковка'),
                                           ('shipped', 'Отправлен'),
                                           ('completed', 'Завершен')],
                                  default='new',
                                  max_length=20,
                                  verbose_name='Статус')),
                ('products_cost',
                 models.DecimalField(decimal_places=2,
                                     default=0,
                                     max_digits=9,
                                     verbose_name='Стоимость товаров')),
                ('delivery_cost',
                 models.DecimalField(decimal_places=2,
                                     default=0,
                                     max_digits=9,
                                     verbose_name='Стоимость доставки')),
                ('delivery_tracking_number',
                 models.CharField(max_length=20,
                                  null=True,
                                  verbose_name='Трек номер доставки')),
                ('total_cost',
                 models.DecimalField(decimal_places=2,
                                     max_digits=9,
                                     verbose_name='Полная стоимость')),
                ('assembling_start',
                 models.DateTimeField(null=True,
                                      verbose_name='Начало сборки')),
                ('assembling_end',
                 models.DateTimeField(null=True,
                                      verbose_name='Завершение сборки')),
                ('picked_at',
                 models.DateTimeField(null=True, verbose_name='Упакован')),
                ('shipped_at',
                 models.DateTimeField(null=True, verbose_name='Отправлен')),
                ('assembler',
                 models.ForeignKey(null=True,
                                   on_delete=django.db.models.deletion.PROTECT,
                                   related_name='assembled_orders',
                                   to=settings.AUTH_USER_MODEL,
                                   verbose_name='Сборщик')),
                ('created_by',
                 models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,
                                   related_name='created_orders',
                                   to=settings.AUTH_USER_MODEL,
                                   verbose_name='Кто создал')),
                ('customer',
                 models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,
                                   to='tezza.customer',
                                   verbose_name='Покупатель')),
                ('picker',
                 models.ForeignKey(null=True,
                                   on_delete=django.db.models.deletion.PROTECT,
                                   related_name='picked_orders',
                                   to=settings.AUTH_USER_MODEL,
                                   verbose_name='Упаковщик')),
            ],
            options={
                'verbose_name': 'Заказ',
                'verbose_name_plural': 'Заказы',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('sku',
                 models.CharField(blank=True,
                                  max_length=100,
                                  verbose_name='Артикул')),
                ('title',
                 models.CharField(max_length=100,
                                  verbose_name='Наименование')),
                ('side',
                 models.CharField(choices=[('L', 'Левый'), ('R', 'Правый')],
                                  default='L',
                                  max_length=8,
                                  verbose_name='Сторона')),
                ('size',
                 models.IntegerField(default=0, verbose_name='Размер, см')),
                ('price',
                 models.DecimalField(decimal_places=2,
                                     default=0,
                                     max_digits=9,
                                     verbose_name='Цена')),
                ('color',
                 models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,
                                   related_name='products',
                                   to='tezza.color',
                                   verbose_name='Цвет')),
                ('material',
                 models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,
                                   related_name='products',
                                   to='tezza.material',
                                   verbose_name='Материал')),
            ],
            options={
                'verbose_name': 'Изделие',
                'verbose_name_plural': 'Изделия',
                'ordering': ['title'],
            },
        ),
        migrations.CreateModel(
            name='OrderLog',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('status',
                 models.CharField(choices=[('new', 'Новый'),
                                           ('wait_payment', 'Ожидает оплаты'),
                                           ('payed', 'Оплачен'),
                                           ('assembly', 'Сборка'),
                                           ('assembled', 'Собран'),
                                           ('coloring', 'Покраска'),
                                           ('packing', 'Упаковка'),
                                           ('shipped', 'Отправлен'),
                                           ('completed', 'Завершен')],
                                  max_length=20,
                                  verbose_name='Статус заказа')),
                ('event',
                 models.CharField(max_length=100, verbose_name='Событие')),
                ('added_at', models.DateTimeField(auto_now=True)),
                ('order',
                 models.ForeignKey(on_delete=django.db.models.deletion.CASCADE,
                                   to='tezza.order',
                                   verbose_name='Заказ')),
            ],
            options={
                'verbose_name': 'Событие по заказу',
                'verbose_name_plural': 'События по заказам',
                'ordering': ['added_at'],
            },
        ),
        migrations.CreateModel(
            name='OrderItem',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('status',
                 models.CharField(choices=[('new', 'Новый'),
                                           ('assembly', 'Сборка'),
                                           ('assembled', 'Собран'),
                                           ('coloring', 'Покраска')],
                                  default='new',
                                  max_length=20,
                                  verbose_name='Статус')),
                ('priority',
                 models.CharField(choices=[('low', 'Низкий'),
                                           ('normal', 'Обычный'),
                                           ('high', 'Высокий')],
                                  default='normal',
                                  max_length=20,
                                  verbose_name='Приоритет')),
                ('price',
                 models.DecimalField(decimal_places=2,
                                     max_digits=9,
                                     verbose_name='Цена')),
                ('order',
                 models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,
                                   related_name='items',
                                   to='tezza.order',
                                   verbose_name='Заказ')),
                ('product',
                 models.ForeignKey(on_delete=django.db.models.deletion.PROTECT,
                                   to='tezza.product',
                                   verbose_name='Изделие')),
            ],
            options={
                'verbose_name': 'Изделие в заказе',
                'verbose_name_plural': 'Изделия в заказах',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='OrderComment',
            fields=[
                ('id',
                 models.BigAutoField(auto_created=True,
                                     primary_key=True,
                                     serialize=False,
                                     verbose_name='ID')),
                ('comment',
                 models.TextField(blank=True,
                                  null=True,
                                  verbose_name='Комментарий')),
                ('added_at', models.DateTimeField(auto_now=True)),
                ('order',
                 models.ForeignKey(on_delete=django.db.models.deletion.CASCADE,
                                   related_name='comments',
                                   to='tezza.order',
                                   verbose_name='Заказ')),
                ('user',
                 models.ForeignKey(null=True,
                                   on_delete=django.db.models.deletion.PROTECT,
                                   related_name='comments',
                                   to=settings.AUTH_USER_MODEL,
                                   verbose_name='Пользователь')),
            ],
            options={
                'verbose_name': 'Комментарии по заказу',
                'verbose_name_plural': 'Комментарии по заказам',
                'ordering': ['added_at'],
            },
        ),
    ]
